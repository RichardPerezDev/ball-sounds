<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test</title>
</head>

<body>
  <video id="myVideo" width="800" height="400" controls autoplay>
    <source src="src/video/balls_test.webm" type="video/webm" />
  </video>
  <h1>Balls:</h1>
  <div id="sounds"></div>

  <script>
    const scores = {
      pick2: "93",
      pick3: "054",
      pick4: "2072"
    };
    const results = [];
    const vid = document.querySelector("#myVideo");
    vid.onplay = function () {
      displayProperties();
      console.log("Inicia script");
    };
    const container = document.querySelector("#sounds");
    let ballIndex = 0;

    for (const pick in scores) {
      const numbers = scores[pick].split("");
      results.push(...numbers);
    }

    const genAudioDisplay = (ballIndex) => {
      container.innerHTML +=
        ballIndex < results.length - 1
          ? `${results[ballIndex] + ", "}`
          : `${results[ballIndex] + "."}`;
      const audio = new Audio(`src/audio/${results[ballIndex]}.mp3`);
      audio.play();
    };

    const balls = {
      first_ball: 34.80,
      second_ball: 35.28,
      third_ball: 41.20,
      fourth_ball: 41.80,
      fifth_ball: 42.55,
      sixth_ball: 52.80,
      seventh_ball: 53.40,
      eighth_ball: 53.90,
      ninth_ball: 54.35,
    };

    function displayProperties() {
      for (const ball in balls) {
        setTimeout(
          (ball) => {
            console.log(`Time: ${balls[ball]}s, Property: ${ball}`);
            genAudioDisplay(ballIndex);
            ballIndex++;
          },
          balls[ball] * 1000,
          ball
        );
      }
    }
  </script>
</body>

</html>